import{f as X,y as Y,n as Z}from"./element-plus.49c70961.js";import{l as G,r as l,e as o,w as H,d as J,a6 as Q,c as R,Y as d,S as i,P as ee,u as s,a8 as ae,n as W,o as f,W as w,X as S,R as _,V as T,L as te,T as V,Z as F,U as O}from"./@vue.8279fe1a.js";import{j as ne,k as le}from"./@element-plus.d72d04b0.js";import{_ as oe}from"./useSimpleList.7f178250.js";import{u as se}from"./vue-i18n.9b911f69.js";const fe=G({__name:"SearchFilter",props:{options:{type:Array,required:!0},model:{type:Object,required:!0},loading:{type:Boolean,default:!1},searchDisabled:{type:Boolean,default:!1},resetDisabled:{type:Boolean,default:!1},showExpand:{type:Boolean,default:!1},showReset:{type:Boolean,default:!0}},emits:["search","reset"],setup(t,{emit:k}){const p=t,r=l(!1),m=l(0),h=l(!0),I=l(0),K=300,y=l(),g=l({}),{t:B}=se(),a=o(()=>{let e=Math.floor(m.value/K)||3;return e>4&&(e=4),e<1&&(e=1),e}),N=o(()=>p.showExpand&&D.value.length>a.value),x=o(()=>({span:24/a.value})),n=o(()=>p.options.filter(e=>!e.hidden)),P=o(()=>{let e=[],c=x.value.span;if(n.value.length<a.value-1)c=(a.value-n.value.length%a.value)*24/a.value,e=[...n.value];else for(let u=0;u<n.value.length;u++){const b=n.value[u];if(e.push(b),e.length>=a.value-1)break}return e.push({name:"search",scopedSlot:"search",colSpan:{span:c}}),e}),D=o(()=>{const e=(a.value-n.value.length%a.value)*24/a.value;return[...n.value,{name:"search",scopedSlot:"search",colSpan:{span:e}}]}),$=o(()=>r.value||!p.showExpand?D:P.value),v=l();function j(e){k("search",e)}function E(){var e;(e=y.value)==null||e.submit()}function q(){z(),W(()=>{k("reset")})}function z(...e){y.value.resetFields(...e)}function L(){r.value=!r.value}function M(){!h.value||(h.value=!1,I.value=setTimeout(()=>{v.value&&(m.value=v.value.offsetWidth,h.value=!0)},300))}function U(){W(()=>{m.value=v.value.clientWidth}),window.addEventListener("resize",M,!1)}return H(()=>p.model,e=>{g.value=e},{immediate:!0}),J(()=>{U()}),Q(()=>{}),(e,c)=>{const u=X,b=Y,C=Z;return f(),R("div",{ref_key:"filterWrapRef",ref:v},[d(oe,ee({ref_key:"form",ref:y},e.$attrs,{value:g.value,"onUpdate:value":c[0]||(c[0]=A=>g.value=A),options:s($).value,layout:"inline","col-span":s(x),gutter:12,onSubmit:j,onKeyup:ae(E,["enter"])}),{search:i(()=>[d(b,null,{default:i(()=>[d(u,{type:"primary",icon:"search",loading:t.loading,disabled:t.searchDisabled,onClick:E},{default:i(()=>[w(S(s(B)("page.common.btn.search")),1)]),_:1},8,["loading","disabled"]),t.showReset?(f(),_(u,{key:0,type:"primary",icon:"brush",loading:t.loading,disabled:t.resetDisabled,onClick:q},{default:i(()=>[w(S(s(B)("page.common.btn.reset")),1)]),_:1},8,["loading","disabled"])):T("",!0)]),_:1}),te(e.$slots,"extraButtons",{loading:t.loading}),s(N)?(f(),R("a",{key:0,onClick:L},[w(S(r.value?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),V(d(C,null,{default:i(()=>[(f(),_(O(s(ne))))]),_:1},512),[[F,r.value]]),V(d(C,null,{default:i(()=>[(f(),_(O(s(le))))]),_:1},512),[[F,!r.value]])])):T("",!0)]),_:3},16,["value","options","col-span","onKeyup"])],512)}}});export{fe as _};
